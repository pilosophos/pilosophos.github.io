---
import CyberPentagon from '@components/CyberPentagon.astro';
import ArticleHeader from '@components/ArticleHeader.astro';
import HomelabDiagram from '@components/HomelabDiagram.astro';
import IconH2 from '@components/IconH2.astro';
import DefaultLayout from '@layouts/DefaultLayout.astro';
---

<DefaultLayout
  title="Homelab"
  metadesc="I have a bunch of computers networked together that I call a homelab. It's not very high budget, and in fact most of it is hand-me-down or scavenged from the trash (and then disinfected)"
>
  <ArticleHeader
    icon="/images/icons/network_cool_two_pcs-0.png"
    width="32"
    title="Homelab"
  >
  I have a bunch of computers networked together that I call a homelab. It's not very high budget, and in fact most of it is hand-me-down or scavenged from the trash <span class="muted">(and then disinfected)</span>.
  </ArticleHeader>

  <div class="flex justify-center">
    <figure class="mb-16">
      <HomelabDiagram />
    </figure>
  </div>

  <main class="container">
    <section class="mb-10 grid grid-cols-3 gap-5" id="omen-15">
      <dl class="machine-specs text-end">
        <div>
          <dt>Operating System</dt>
          <dd>Arch Linux</dd>
        </div>

        <div>
          <dt>Central processing unit</dt>
          <dd>Intel i7-7700HQ</dd>
        </div>

        <div>
          <dt>Graphics</dt>
          <dd><ul>
            <ol>Intel HD Graphics 630</ol>
            <ol>NVIDIA GeForce GTX 1050 Ti Mobile</ol>
          </ul></dd>
        </div>

        <div>
          <dt>Memory</dt>
          <dd>16 GB</dd>
        </div>

        <div>
          <dt>Hard drive</dt>
          <dd>HGST Travelstar 7K1000 (1TB)</dd>
        </div>

        <div>
          <dt>Solid state drive</dt>
          <dd>SK Hynix Gold P31 (1TB)</dd>
        </div>
      </dl>

      <CyberPentagon corner="bottom-left" notch="50px" class="bg-pi-yellow p-px ps-10 rounded col-span-2">
        <CyberPentagon corner="bottom-left" notch="50px" class="bg-pi-gray rounded p-5 h-full">
          <IconH2 icon="/images/icons/laptop.png" class="mb-5">Main computer: HP Omen 15 (2017) 15-ce0xx</IconH2>
          <p class="mb-5">A hand-me-down laptop from a friend of mine who was upgrading. It's fairly large, so I don't carry it around with me. There's a billion cables attached at all times anyway, so it would be a huge pain. I'd like to build my own beast of a computer someday, but it's not like I'm keeping up with any triple-A game titles these days, so what I have works fine.</p>

          <section>
            <h3 class="text-2xl font-display mb-3">Notes</h3>
            <ul class="list-disc ps-5 grid gap-3">
              <li>I use both the integrated and discrete GPU since I have it connected to two monitors: a Huion Kamvas display tablet and some Viewsonic monitor. The Huion is mounted to this swivel arm thingy so I can pull it from a typical monitor position down to my desk to draw on it.</li>
              <li>The SSD was originally a measly 120 GB boot drive, which started to fail after a while so I replaced it with a 1TB one.</li>
            </ul>
          </section>
        </CyberPentagon>
      </CyberPentagon>
    </section>

    <section class="mb-10 grid grid-cols-3 gap-5" id="ideapad">
      <CyberPentagon corner="bottom-right" notch="50px" class="bg-pi-cyan p-px pe-10 rounded col-span-2">
        <CyberPentagon corner="bottom-right" notch="50px" class="bg-pi-gray rounded p-5 h-full">
          <IconH2 icon="/images/icons/laptop.png" class="mb-5">Home server: Lenovo Ideapad Y50-70</IconH2>

          <div class="mb-10">
            <p>My home server is also a hand-me-down laptop, this time from my family. A laptop might be an unusual choice for a server, but I like to think of it as a server with a built in UPS and monitor*, which has come in handy every now and then. It's quiet enough that I can sleep next to it daily, which is important since I live in a microscopic studio apartment.</p>
            <small>* I later discovered the battery had become what's known as a Spicy Pillow (technical term), so that had to go.</small>
          </div>


          <div class="grid grid-cols-2">
            <section>
              <h3 class="text-2xl font-display mb-3">Services</h3>
              <ul class="list-disc ps-5">
                <li>File storage: Owncloud</li>
                <li>Personal wiki: Dokuwiki</li>
                <li>Media server: Jellyfin</li>
                <li>Tagged image store: Szurubooru</li>
                <li>Minecraft server (Aug-Nov 2023: Enigmatica 6 Expert)</li>
              </ul>
            </section>

            <section>
              <h3 class="text-2xl font-display mb-3">Notes</h3>
              <ul class="list-disc ps-5 grid gap-3">
                <li>The server recieved a RAM upgrade from 8 to 16 GB after I started hosting a Enigmatica 6 Expert server, which consumes a ridiculous amount of RAM. I actually don't think this is enough, especially with the other services running. I don't want to spend even more money, so I increased the swapfile to 6 GB which at least keeps it from OOMing.</li>
                <li>I previously used Airsonic for music, but I moved to Jellyfin to handle movies and TV also. Unfortunately, the Android app has problems playing back certain formats for unknown reasons, but the web interface seems to work fine. lorem</li>
              </ul>
            </section>
          </div>
        </CyberPentagon>
      </CyberPentagon>

      <dl class="machine-specs">
        <div>
          <dt>Operating System</dt>
          <dd>Debian Linux</dd>
        </div>

        <div>
          <dt>Central processing unit</dt>
          <dd>Intel i7-4710HQ</dd>
        </div>

        <div>
          <dt>Graphics</dt>
          <dd><ul>
            <ol>Intel HD Graphics 4600</ol>
            <ol>NVIDIA GeForce GTX 860M</ol>
          </ul></dd>
        </div>

        <div>
          <dt>Memory</dt>
          <dd>16 GB</dd>
        </div>

        <div>
          <dt>Solid state drive</dt>
          <dd>Patriot P210 (1TB)</dd>
        </div>
      </dl>
    </section>

    <section id="pocket-reform" class="mb-10 prose prose-invariants max-w-full">
      <IconH2 icon="/images/icons/laptop.png" class="mb-5 not-prose">Funputer: MNT Pocket Reform v1</IconH2>

      <p>This was a gift from <a href="https://tilde.town/~vilmibm">~vilmibm</a> at <a href="https://tilde.town">tilde.town</a>. Thanks very much!</p>

      <p>The <a href="https://shop.mntre.com/products/mnt-pocket-reform">Pocket Reform</a> is an open-hardware ARM Linux palmtop that has a mechanical keyboard, internal I<sup>2</sup>C bus, and a separate M.2 slot for a 4G/5G/LTE modem. This one is the original model from when it was being funded on Crowdsupply. This device is so fascinating I could probably dedicate a whole review to it in and of itself. I often carry it around if I don't need to be at work <span class="muted">(I do <abbr title="machine learning">ML</abbr> and video processing for linguistics research, which are ill suited for the Pocket Reform)</span>, and it's especially useful for distraction-free writing.</p>

      <p>I also use it as a 3D printer controller/server with my Ender 3. I use the Klipper firmware, which allows the Pocket Reform to directly control the kinematics of the printer, and is extremely handy if I need to make configuration changes and I don't want to compile and flash new firmware (a painstaking process with Marlin firmware). <smap class="muted">Fun fact: I rescued my Ender 3 from the trash room of my apartment building, which just needed a little TLC.</span></p>

      <p>My main issue with it is its poor battery lifeâ€• it drains a lot of battery even when completely powered off. In theory, a better charger board and/or batteries would solve this problem, and if they existed, it would be easy to swap them in. I'm no electrical engineer, so unfortunately I just have to live with the battery life.</p>

      <div class="not-prose grid lg:grid-cols-2 mx-auto gap-5">
        <div>
          <h3 class="text-2xl font-display mb-3">Information</h3>
          <dl class="grid gap-4">
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">OS</dt>
              <dd class="col-span-7">Debian Linux</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">Compute module</dt>
              <dd class="col-span-7">NXP i.MX 8M Plus</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">CPU <span class="text-sm font-normal">(on compute module)</span></dt>
              <dd class="col-span-7">Quad-core ARM Cortex-A53</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">GPU <span class="text-sm font-normal">(on compute module)</span></dt>
              <dd class="col-span-7">Vivante GC7000 rev 6204</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">RAM <span class="text-sm font-normal">(on compute module)</span></dt>
              <dd class="col-span-7">8 GB</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold col-span-3">eMMC</dt>
              <dd class="col-span-7">100GB</dd>
            </div>
          </dl>
        </div>

        <div>
          <h3 class="text-2xl font-display mb-3">Notes</h3>
          <ul class="list-disc ps-5 grid gap-3">
            <li>
              Things I use this machine to do:
              <ul class="list-disc ps-5 grid gap-1">
                <li>Macro pad/mouse next to my drawing tablet on my main computer, using Deskflow</li>
                <li>3D print server</li>
                <li>Distraction-free writing</li>
                <li>Web browser</li>
                <li>Updating my website with small changes</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </section>
    </section>

    <section id="thinkpad-x260" class="mb-10 prose prose-invariants max-w-full">
      <IconH2 icon="/images/icons/laptop.png" class="mb-5 not-prose"> Seriousputer: Lenovo Thinkpad X260 20F6005HUS</IconH2>

      <p class="mb-5">This Thinkpad was originally released in 2016, but I got it second-hand off eBay in 2019 as my main computer. It's now <code>$currentYear</code>, and it's still going. It's small and light enough to carry around, so even though I now main a more powerful computer, so I still carry this out-and-about and I have work to do, instead of the <a href="#pocket-reform">Pocket Reform</a>.</p>

      <div class="not-prose grid lg:grid-cols-2 mx-auto gap-5">
        <div>
          <h3 class="text-2xl font-display mb-3">Information</h3>
          <dl class="grid gap-4">
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold">OS</dt>
              <dd class="col-span-8">Arch Linux</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold">CPU</dt>
              <dd class="col-span-8">Intel i5-6200U</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold">GPU</dt>
              <dd class="col-span-8">Intel HD Graphics 520</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold">RAM</dt>
              <dd class="col-span-8">8 GB</dd>
            </div>
            <div class="grid grid-cols-10 gap-1">
              <dt class="font-bold">SSD</dt>
              <dd class="col-span-8">1TB</dd>
            </div>
          </dl>
        </div>

        <div>
          <h3 class="text-2xl font-display mb-3">Notes</h3>
          <ul class="list-disc ps-5 grid gap-3">
            <li>I had to replace the RAM 4 years after I got it.</li>
            <li>The HDD that came with was replaced with an SSD, a much needed upgrade.</li>
            <li>It has both an internal batter *and* external battery! I don't actually have spare external batteries, but it's still fun to take the external battery off and have it still running.</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="galaxy-s4" class="mb-10 prose prose-invariants max-w-full">
      <IconH2 icon="/images/icons/modem-4.png" class="mb-5 not-prose">3D printer server: Samsung Galaxy S4 (Retired)</IconH2>      
      <p>The Samsung Galaxy S4 used to by my daily-driver smartphone, but I have since replaced it with a Moto G Play 2021. Afterwards, it saw brief usage as a 3D print server for my Ender 3, using <a href="https://github.com/feelfreelinux/octo4a" class="link">octo4a</a>, a port of OctoPrint for Android. It runs very hot even when it's not doing anything, so I decided it would be safer to give up on it.</p>
    </section>

    <section id="thinkpad-l420" class="mb-10 prose prose-invariants max-w-full">
      <IconH2 icon="/images/icons/laptop.png" class="mb-5 not-prose">Main computer: Thinkpad L420 (Retired)</IconH2>      
      <p>This laptop has the build quality of a tank, so much that I used to joke that if I got mugged on my way to school, I could wield this as a weapon and boot it up after the fight to e-mail my teachers why I'd be late. The trade-off there is that it also extremely heavy, akin to carrying around a whole brick. The <em>absence</em> of an inbuilt webcam is punctated by the conspicuous plastic insert that replaced it from the factory, though I usually cover up webcams with tape anyway.</p>
      
      <p>This is one of the only devices I own with a DVD read/writer, so I installed Debian on it and occasionally use it for discs. Unfortunately, the Matshita UJ8A0A DVD-RAM drive is region-locked in a way that VLC cannot bypass, and I cannot find a region-free firmware for this drive. If you find one, please <a href="mailto:pilosophos@gmail.com">email me</a>.</p>
    </section>
  </main>
</DefaultLayout>